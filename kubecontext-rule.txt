Step 1: Set the public-IP cluster (default) as the active context
You likely already created it like this:

kubectl config set-cluster default \
  --server=https://54.172.16.157:6443 \
  --insecure-skip-tls-verify=true
  
  
  
Now do:

kubectl config set-context ci-context \
  --cluster=default \
  --user=kubernetes-admin
  
  
kubectl config use-context ci-context




Step 2: Export the minimal working config





kubectl config view --flatten --minify > kubeconfig.yaml
base64 -w 0 kubeconfig.yaml 



Step 3: Copy that output into your GitHub Actions secret KUBECONFIG
 
copy the output and store in GitHub as:
Name: KUBECONFIG_FILE

Value: (paste the base64-encoded string)



---------------------------------------------
YXBpVmVyc2lvbjogdjEKY2x1c3RlcnM6Ci0gY2x1c3RlcjoKICAgIGluc2VjdXJlLXNraXAtdGxzLXZlcmlmeTogdHJ1ZQogICAgc2VydmVyOiBodHRwczovLzU0LjE3Mi4xNi4xNTc6NjQ0MwogIG5hbWU6IGRlZmF1bHQKY29udGV4dHM6Ci0gY29udGV4dDoKICAgIGNsdXN0ZXI6IGRlZmF1bHQKICAgIHVzZXI6IGt1YmVybmV0ZXMtYWRtaW4KICBuYW1lOiBjaS1jb250ZXh0CmN1cnJlbnQtY29udGV4dDogY2ktY29udGV4dApraW5kOiBDb25maWcKcHJlZmVyZW5jZXM6IHt9CnVzZXJzOgotIG5hbWU6IGt1YmVybmV0ZXMtYWRtaW4KICB1c2VyOgogICAgY2xpZW50LWNlcnRpZmljYXRlLWRhdGE6IExTMHRMUzFDUlVkSlRpQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENrMUpTVVJMVkVORFFXaEhaMEYzU1VKQlowbEpUbkJWVWtwWlUwVnZhVEIzUkZGWlNrdHZXa2xvZG1OT1FWRkZURUpSUVhkR1ZFVlVUVUpGUjBFeFZVVUtRWGhOUzJFelZtbGFXRXAxV2xoU2JHTjZRV1ZHZHpCNVRsUkJlVTFxVVhkT2FrRjZUa1JvWVVaM01IbE9ha0Y1VFdwUmQwNXFRVFJPVkVKaFRVUjNlQXBJZWtGa1FtZE9Wa0pCYjFSR2JYUXhXVzFXYUZwSE1EWlpNbmd4WXpOU2JHTnBNV2hhUnpGd1ltNU5lRWRVUVZoQ1owNVdRa0ZOVkVWSGRERlpiVlo1Q21KdFZqQmFXRTEwV1ZkU2RHRlhOSGRuWjBWcFRVRXdSME5UY1VkVFNXSXpSRkZGUWtGUlZVRkJORWxDUkhkQmQyZG5SVXRCYjBsQ1FWRkVXRFk1YTNBS1pHZElUelJyTkVoNlIwODJOME5WUVROTlJpc3phMngzUm5KRFNFaFBPQzg0ZHk5amNXeDVZa0U0Tmtad2VHWlNka3c0VGpoNk16ZG1NVTFpTmpWSldRbzRhbTlTVkM5RGJIbE9kbWx0ZGpoV1YwSkliMXBvTVZGVGRXODBiamd4WjNkWVJFd3lTR0pUVTB0bU1tcFFiVVU0TDFVd2FXUmxSMkpIWjJwdGIyZFdDbVpJWlhrelZrTnVURzQyTnk5TGRqRm1kekIzVVV4M0t6aDNPVlZxYjJoU1ZFVnJWMEY2ZVcxYWFEaG1NVVZSY21wcFNsVkdMMGhCUzNSNlIxVnRlRThLWVhkbVlXRjFZeXR5TWs1MVVqTm5kSGgyUVdSdFMxSjBUMFZXY2pGc1dIRnBWMEYwVVZCbVZFa3JUblZEVlc1aFNESktURWxwY1hFNVNqTmtaVzl6UmdwWmFDOTJkVTE0TjJaWFMydFVRMkp2TVhwbVFuZHBlR3ByTVdGNk5sSXhRV05PV2tWMmRXbENibkIxVkV4b2RGRXhVako0V0VWRFZscEhOWFZuUms5WkNrbDZkRFpqVUdzck1FRlZTMmxNVjNaQlowMUNRVUZIYWxacVFsVk5RVFJIUVRGVlpFUjNSVUl2ZDFGRlFYZEpSbTlFUVZSQ1owNVdTRk5WUlVSRVFVc0tRbWRuY2tKblJVWkNVV05FUVdwQlRVSm5UbFpJVWsxQ1FXWTRSVUZxUVVGTlFqaEhRVEZWWkVsM1VWbE5RbUZCUmt0SU5Xb3lObHBOTVZkRWVXOXdlQW8zZG1GUmIycEpaa0pFYVhSTlFUQkhRMU54UjFOSllqTkVVVVZDUTNkVlFVRTBTVUpCVVVSb1FrcDBMMnQxUmtaWlQxcHhkSHBHT1ZSb2RDdEVaRmx6Q25KS1Fta3hTbWd3UVV0SWVFdGlhRE5TVVd0dFVFeDBZVTlNU0RSa1pITTJhbkJFVkhwclJteHhlbVp0VTB0bFFuaFRkbmgzWVd4UFYwMTZaalUzUWtJS1ZTOTBMemRrY0c1MlVUVm9lRzFHY2xaUWFGTmhWbVpFTVhaUFMzZFBWV01yTms5bllrVnlhR1oxZFdVemFFRTVWM1ZQWjFOWlpucFpNM2hoV0V0SlFncEZUell4ZVRKemRqZFlRWEp2TUZNMmFVcE9TVVZCWXl0c00yeHJRMDVqV0dzcmFTOTVZMVphYjFoMmNYQlNORTkxUlU0dlIwRkhORmxzWmxKRVIzUXZDbWxrYWtwdWFqY3hLME5MY0VNNE9XdEtaRGhuYm1SS2JqZ3hSbXR6WldwYVQyeEhNbmhITWpGMlNYVnlTVEZLUlRjdlEyUXdaMUk1VkVSM1Z6QTBaMG9LVWpWMFpXWnRPRTlwVFhkbU9EWm9hMVpPVlVsQ1FXSnpZVU5QTUdWRWR6TlROalJJVFNzMmJEQlZXR281TkdzM1FtOUpTRkJ4WkVaa1MxTTRDaTB0TFMwdFJVNUVJRU5GVWxSSlJrbERRVlJGTFMwdExTMEsKICAgIGNsaWVudC1rZXktZGF0YTogTFMwdExTMUNSVWRKVGlCU1UwRWdVRkpKVmtGVVJTQkxSVmt0TFMwdExRcE5TVWxGY0ZGSlFrRkJTME5CVVVWQk1TdDJXa3RZV1VKNmRVcFBRamg0YW5WMWQyeEJUbnBDWm5RMVNtTkNZWGRvZUhwMlVDOU5VRE5MY0dOdGQxQlBDbWhoWTFnd1lua3ZSR1pOT1Nzek9WUkhLM1ZUUjFCSk5rVlZMM2R3WTJwaU5IQnlMMFpXWjFJMlIxbGtWVVZ5Y1U5S0wwNVpUVVozZVRsb01qQnJhVzRLT1c5Nk5XaFFVREZPU1c1WWFHMTRiMGsxY1VsR1dIZ3pjM1F4VVhCNU5TdDFMM2x5T1ZnNFRrMUZRemhRZGsxUVZrazJTVlZWZUVwR1owMDRjRzFaWmdwSU9WSkZTelEwYVZaQ1puaDNRM0pqZUd4S2MxUnRjMGd5YlhKdVVIRTVhbUpyWkRSTVkySjNTRnBwYTJKVWFFWmhPVnBXTm05c1oweFZSRE13ZVZCcUNtSm5iRW95YURscFUzbEpjWEYyVTJReldIRk1RbGRKWmpjM2FrMWxNekZwY0VWM2JUWk9Zek4zWTBseldUVk9WM01yYTJSUlNFUlhVa3czYjJkYU5tSUthM2swWWxWT1ZXUnpWbmhCYkZkU2RXSnZRbFJ0UTAwM1pXNUVOVkIwUVVaRGIya3hjbmRKUkVGUlFVSkJiMGxDUVVKeFltbGhjeXRUTkVzdlEwaGhWZ3BxVlZObWFsQXZTMDVHTXpVM2JuSk9hMUIwVm1GWVdYSTRZWGg2YjJVelNWUnJOMU5DU0VadlNGQk5VRWx1WnpObVNIQlpWVk41V25wUFdVNVFPRFYxQ2t4bmNVTndlVkoxVFdWaE9XcHhZM2xXUTB0bFRIRlVXbk5hYVhSSFFtUmFkRXhyUWt4ck5XWTRZblZFYzFCa2VuSklSMWQyVjFwSllrVmxlVlpvYjBRS09VMUpaSEJQVFdaM1VGSk9VbVZXVERsdWRYQkNUWFJtTlhwSE4wRnRRelZCTXk5NVNHZ3dkR2hsVVhVMlRsUmhiMWt3U21GWE5IbEZaVEZTZVVGa2R3cGhZMFE0Y0RoV1dTODNhSGh3VUdKME9UQk5ZeXR3WlZrelpUTm5UakpLVXlzemJUZG1ZWFkwVkRsVWRHUkpORFJqVUVjdk5HdzRPRFpZZFVORmFDdHNDbk51U1VzeVdDczNUWEZxVVhjM0t6SnJURWRoY3pSS1YwaG1RVEYzYmtKaFVuRmFRa2RJY2s5VE5HbHNNeXQxYUdKaWIwazJjekowTVhoeU5sSm9RMDhLVXpKbVdHUkRSVU5uV1VWQk5FbGlOWGRwUVVwMVYwZzFiVmRCUlc5c1kyeFZkelpaT1VKNVdtYzFkV0pYZERkUGRtaE9VRVlyVWtKemJqZHllQzlKWXdwV1JXZHZhMjlhYlRoNVJtbDRabE5HVUZoSVVYZHZVRU40ZUhFeVJtSkNSbTl2V201SGRVSjVha0puV0d4YWFUUmFXazVCVWtselRDdElNekZCYzA0d0NrSTJhRXRLVlRodGRWRXplREpOVlhNMWFEQnBNRU5WZGxwNmNYRklNREpvY2xjdlVHaFdhbHA2YWtnd1NuazRWbmd6VDI1NFNqQkRaMWxGUVRscVFVNEtaekpPUjA5eGVsQktUblZWUjJsdWJFRkphMWwyWkVaWWVXZERVVkJDVFVkb1VuSmpkR1V2Tm1ab2VuSnNTa2hYTlZaQmRFa3pkbU40UmtwTlZuaEZhUW94YzJSb1VEZGpURTVpWVc5Wk4zRXZVRkJPYW1OVEt6aGtUVTlqVGpkblRHcENiV2R2VkRCUVFXTlVSbE5KZUd4VFdGbEdaM05CY2tOc0wydGlNRmhsQ2twdmRUYzVZbUZ1WVdWdGJteHZVekEwSzBaNGIyOTNZWFpqVnpOMk1WVjZUa2RTZWxFM2MwTm5XVVZCZVRCdmNXeFNUMEVyYmtzeFJtRlBWVlJ3UW5NS05GQnFWV3REU0dNNVVWcE5PRlZtVUVaT1dsTjRTMVZOZG5SeFowUk9ZM1ozZW1aaFZrZERVV3RuTlcxaGFXeDBRV2xqZEVKNFJscHhRVU5PV1V4SVRBcFBjelZMVTBaR01FcFdaMms0YmxodFlqQkhWamRRYldkcGQzTjNZbUZKWlZOc2FXSlhXa05ETVZGaVJrNUxia05pTURsMVJqbDFlbEZrYjJnNGJHNU9Dbmt3VkhwT2FEaDFhR0l4UVM5TlJuSkVUREozTlhoclEyZFpSVUV6ZFhWUFNVOHlkM1IzY1hCdGVHUldSMUZtWTJVNGNXOVpOa1FyTTBWUU9GWjBiRzRLWVhac2VUVjVMMEUwTldOMVdHdzFZMlF4U2s1UVZHTTBTbGhFWWk5WE4yWXpRbTB6TTIxcVVuUnlZVW8zV25jME9VZHFla2cxWkRWRU1GaGpNamQwUlFwbldIcHVURmhzVEdOSEsweHpTRU52Wlc5a2NUUkJWa0ZOSzIweWQwZGtSV3BEVXpGamRqUk5keXRQTWxFMU5IYzJZbEJJU1UxbE5tOTVTVFJwZDBWTkNrWTJTSEJ0VjJORFoxbEZRWEJQU1VOR09DczVRa2xNWVc1MVV6ZHBSeTlGYlZoRFUzUXliak5QY1ZGb1VGbHpia3ROVVN0MEwxaDVhMjFDVFc5UE4yVUtiR1kxU1U1c1NHY3laamMxV2tOV2VHd3dOVkJNZGpObVJHOVRaR1puZG5CSVIzVnVVRlE1U2tWaWRGZ3JiRTR3VWtaVmVFUlJLM1J2Vm5WRVJFUkpiQXBPTm5kT2NrNUhOVFpoYkdwbE0zWTJUVXMyVlZsSVdGZGphM1JVZG5wcFJXYzBXVGxWU0UxR09WTmxZbmwyV0VkWk0yWlZPRXhuUFFvdExTMHRMVVZPUkNCU1UwRWdVRkpKVmtGVVJTQkxSVmt0TFMwdExRbz0K
 

